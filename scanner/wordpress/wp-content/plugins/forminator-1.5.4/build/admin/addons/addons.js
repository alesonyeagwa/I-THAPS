!function(t){formintorjs.define(["admin/addons/view"],function(i){var a=Backbone.View.extend({el:".sui-wrap",currentTab:"forminator-integrations",events:{"change .forminator-addon-toggle-enabled":"toggle_state","click .connect-integration":"connect_integration","click .forminator-integrations-wrapper .sui-vertical-tab a":"go_to_tab","change .forminator-integrations-wrapper .sui-sidenav-hide-lg select":"go_to_tab","click .sui-sidenav .sui-vertical-tab a":"sidenav","keyup input.sui-form-control":"required_settings"},initialize:function(t){return this.listenTo(Forminator.Events,"forminator:addons:reload",this.render_addons_page),this.render()},render:function(){this.render_addons_page(),this.update_tab()},render_addons_page:function(){var i=this,a={};this.$el.find("#forminator-integrations-display").html('<div class="sui-notice sui-notice-sm sui-notice-loading"><p>Fetching integration listâ€¦</p></div>'),a.action="forminator_addon_get_addons",a._ajax_nonce=Forminator.Data.addonNonce,a.data={},t.post({url:Forminator.Data.ajaxUrl,type:"post",data:a}).done(function(t){t&&t.success&&i.$el.find("#forminator-integrations-page").html(t.data.data)}).always(function(){i.$el.find(".sui-notice-loading").remove()})},connect_integration:function(a){a.preventDefault();var e=t(a.target);e.hasClass("connect-integration")||(e=e.closest(".connect-integration"));var n=e.data("nonce"),s=e.data("slug"),r=e.data("title"),o=e.data("image"),d=e.data("imagex2"),l=e.data("action"),u=e.data("form-id"),c=e.data("multi-id");Forminator.Integrations_Popup.open(function(){new i({slug:s,nonce:n,action:l,form_id:u,multi_id:c,el:t(this)})},{title:r,image:o,image_x2:d})},go_to_tab:function(i){i.preventDefault();var a=t(i.target),e=a.attr("href"),n="";if(_.isUndefined(e)){n=a.val()}else n=e.replace("#","",e);_.isEmpty(n)||(this.currentTab=n),this.update_tab(),i.stopPropagation()},update_tab_select:function(){this.$el.hasClass("wpmudev-forminator-forminator-integrations")&&(this.$el.find(".sui-sidenav-hide-lg select").val(this.currentTab),this.$el.find(".sui-sidenav-hide-lg select").trigger("sui:change"))},update_tab:function(){this.$el.hasClass("wpmudev-forminator-forminator-integrations")&&(this.clear_tabs(),this.$el.find("[data-tab-id="+this.currentTab+"]").addClass("current"),this.$el.find(".wpmudev-settings--box#"+this.currentTab).show())},clear_tabs:function(){this.$el.hasClass("wpmudev-forminator-forminator-integrations")&&(this.$el.find(".sui-vertical-tab ").removeClass("current"),this.$el.find(".wpmudev-settings--box").hide())},sidenav:function(i){if(this.$el.hasClass("wpmudev-forminator-forminator-settings")){var a=t(i.target).data("nav");a&&this.sidenav_go_to(a,!0)}i.preventDefault()},sidenav_go_to:function(t,i){var a=this.$el.find('a[data-nav="'+t+'"]'),e=a.closest(".sui-vertical-tabs"),n=e.find(".sui-vertical-tab"),s=this.$el.find(".sui-box[data-nav]"),r=this.$el.find('.sui-box[data-nav="'+t+'"]');i&&history.pushState({selected_tab:t},"Global Settings","admin.php?page=forminator-settings&section="+t),n.removeClass("current"),s.hide(),a.parent().addClass("current"),r.show()},required_settings:function(i){var a=t(i.target),e=a.parent(),n=e.find(".sui-error-message"),s=a.closest("div[data-nav]"),r=s.find(".sui-box-footer"),o=r.find(".wpmudev-action-done");this.$el.hasClass("wpmudev-forminator-forminator-settings")&&(a.hasClass("forminator-required")&&!a.val()&&e.hasClass("sui-form-field")&&(e.addClass("sui-form-field-error"),n.show()),a.hasClass("forminator-required")&&a.val()&&e.hasClass("sui-form-field")&&(e.removeClass("sui-form-field-error"),n.hide()),s.find("input.sui-form-control").hasClass("forminator-required")&&(0===s.find("div.sui-form-field-error").length?o.prop("disabled",!1):o.prop("disabled",!0))),i.stopPropagation()}});jQuery(document).ready(function(){new a})})}(jQuery);